<!DOCTYPE html>
<html>
    <head>
        <title>My App</title>
        <meta charset="utf-8">
        <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no, minimal-ui">
        <link rel="stylesheet" href="style/app.min.css">
        <link rel="stylesheet" href="style/custom.css">
        <style type="text/style">
        .button-search {
            background-image: url(data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAACAAAAAgCAYAAABzenr0AAACjElEQ…BN3Eb7/8yva2LSSH4XsbVKbm5413AeCePamhYRRYv52z/AKK4/BRObOQAAAABJRU5ErkJggg==);
            background-repeat: no-repeat;
            background-position: 12px center;
            -webkit-background-size: 16px 16px;
            background-size: 16px 16px;

            height: 16px;
            width: 16px;
        }
        </style>
    </head>

    <body>
        <div class="app-page" data-page="home">
            <div class="app-topbar blue">
                <div class="app-button left button-menu js-btn-menu">&nbsp;&nbsp;</div>
                <div class="app-title">法律文库</div>
                <div class="app-button right button-search js-btn-search">&nbsp;</div>
            </div>
            <div class="app-content">
                <form class="js-form-search" action="" style="display:none;">
                    <input class="app-input" type="search" placeholder="Search...">
                    <input type="submit" style="display:none">
                </form>
                <!-- <div class="app-section"> -->
                    <ul class="app-list">
                    </ul>
                <!-- </div> -->
            </div>
        </div>

        <div class="app-page" data-page="detail">
            <div class="app-topbar blue">
                <div class="app-button left" data-back>返回</div>
                <div class="app-title"></div>
            </div>
            <div class="app-content">
                Page 2 is lonely
            </div>
        </div>
        <script>
            window.MSA = {};
        </script>
        <script src="script/lib/zepto.js"></script>
        <script src="script/lib/app.min.js"></script>
        <script src="script/web/list.js"></script>
        <script>
            App.controller('home', function (page) {
                var list = MSA.List.getArticles();
                $p = $(page);
                $listCont = $(page).find('.app-list');
                $.each(list, function(i, o){
                    if(o.name){
                        $listCont.append('<li>' + o.name + '</li>');
                    }
                })

                $formSearch = $p.find('.js-form-search');
                $btnSearch = $p.find('.js-btn-search');
                $btnSearch.on('click', function(){
                    $searchBtn = $(this);
                    if($searchBtn.hasClass('selected')){
                        $searchBtn.removeClass('selected');
                        $formSearch.hide();
                    }else{
                        $searchBtn.addClass('selected');
                        $formSearch.show();
                    }
                })
            });

            App.controller('detail', function (page) {
                // put stuff here
            });

            try {
                App.restore();
            } catch (err) {
                App.load('home');
            }
        </script>
    </body>
</html>
